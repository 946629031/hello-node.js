# Node.js入门到企业Web开发中的应用

Node.js 各种语法 入门讲解

从零开始掌握大型互联网公司NodeJS实际使用

[【视频地址】慕课网 Node.js入门到企业Web开发中的应用 2017年11月](https://coding.imooc.com/class/chapter/146.html#Anchor)

看视频整理要点笔记：

----

**目录**
- [第1章 导学]()
- [第2章 NodeJS 是什么，为什么偏爱NodeJS ?]()
    - []()
    - []()
    - []()
- []()
    - []()
    - []()
    - []()
    - []()
- []()
- []()
- []()

----

## 第1章 导学
- 带着以下4个问题学习本门课
    - NodeJS 究竟是什么？
    - NodeJS 好在哪里？
    - NodeJS 擅长解决哪些实际问题？
    - NodeJS 怎么解决这些问题的？

- 学习方式
    - 了解 NodeJS 是什么，好在哪里
    - 从静态资源服务器实战熟悉使用NodeJS做项目流程
    - 展开介绍代码构建、测试等使用技巧，介绍项目周边

- 课程大纲
    - NodeJS 介绍
    - 调试 & 项目初始化
    - 基础API
    - 简单 Web Server
    - 单元测试 & 发布
    - NodeJS 爬虫示例

## 第2章 NodeJS 是什么，为什么偏爱NodeJS ?
- ### 2-1 NodeJS 是什么？
    - 1.官方解释："Node.js is a JavaScript runtime built on Chrome`s V8"
        - Node.js是一个构建中Chrome V8 引擎上的JavaScript运行时
        - Node.js 不是一门语言，JS才是语言。Node只是一个运行时(runtime)
        - 语言想在不同的宿主上跑，就需要不同的runtime。Node.js 就是让 JavaScript 在服务器端跑起来的 runtime
    - 2.严格来说，Node.js 不能使用 javascript 的全集，如 DOM, BOM
        - 所以，我们也可以称 Node.js 为 ECMA 的 runtime
        - Node.js 也很像 Java 的 JDK。所以我们也可以称 Node.js 为 EDK，ECMA Development Kit(工具包)
    - 3.NodeJS 特点
        - Node.js uses an event-driven, non-blocking I/O model
            - 事件驱动，非阻塞的I/O模型
        - 非阻塞 I/O
            - I/O
                - Input/Output
                - 计算机 输入/输出 的意思
            - 先看什么是 阻塞I/O
                - **阻塞：I/O 时，进程休眠等待I/O完成后再进行下一步**
                    - 为什么会这样子？因为一般情况下
                    - 计算机的指令是逐条顺序执行的，执行完前一句，才会执行下一句，直到程序结束
                    - 其中，如果程序语句遇到了，调用I/O的操作，会向系统底层的 I/O 发送调用指令，期间会等待I/O返回结果，然后在继续执行当前指令。
                    - 其中，这种等待I/O返回结果的行为，就叫做 **阻塞**
                - **非阻塞：I/O 时，函数立即返回，进程不等待 I/O 完成**
                    - 在程序指令一条条的执行，当碰到 I/O 指令，开始调用系统底层的 I/O , 然后主程序不用等待 I/O 返回结果，直接进行下一步，执行下一条指令，当 I/O 完成时，就会通知主进程，这时候，主进程再决定是使用 I/O 得到的结果继续处理，还是丢弃 I/O 得到的结果。
                    - 这其中，主程序始终是流畅的，并没有等待的过程，所以我们称之为 **非阻塞**
            - 实际上
                - 在计算机中，上一条指令，实际上就是 阻塞了 下一条指令。那为什么还把 非阻塞I/O 这个概念拿出来说？
                - 原来，在计算机中 CPU 的计算速度是奇快无比的，一秒钟能执行 30亿 条指令
                - 而，磁盘的读写操作，却远远比不上 CPU 的计算速度
                - 这将导致，我们在打开网页的时，主要的速度瓶颈在于 I/O操作，而不在于 CPU 计算速度
        - 事件驱动
            - 什么是事件驱动？
                - 举个例子
                    - 我们在开发网页的时候，写个按钮，然后给按钮绑定一个 click 事件。
                    - JavaScript 并不知道什么时候调用这个 Click 事件处理程序，只是给他绑定了 事件处理程序，然后等待调用。我也不知道什么时候调用，反正不是立马调用。
                    - 只有当按钮被点击时，才触发 click 事件，然后才会执行这个 事件处理程序
            -  等I/O的异步操作 结束后的通知主进程
            - 内部的实现 也是一个 **观察者模式**

- ### 2-2 NodeJS 究竟好在哪里？
    - NodeJS 并不适合所有 Server 的场景，Web 是 NodeJS 最适合的场景
    - 为什么前端偏爱 NodeJS ？
        - NodeJS 使用的语言就是 JavaScript
        - 前端职责范围变大，统一开发体验
        - 在处理高并发、I/O密集场景性能优势明显(事件驱动、异步I/O模型)
    - 什么是I/O密集？
        - CPU 密集
            - 如果一个程序，大部分时间是用来做计算、做逻辑判断、等CPU动作，我们就称之为 CPU密集
            - CPU 密集: 压缩、解压、加密、解密
        - I/O 密集
            - 如果一个程序，大部分时间是用来做存取、网络的存取操作，我们就称之为 I/O密集
            - I/O 密集：文件操作、网络操作、数据库
    - Web 常见场景
        - 静态资源读取
        - 数据库操作
        - 渲染页面
        - 由于CPU是超级快的，而 I/O 是超级慢的，所以，Web 场景是 I/O 密集场景
        - 对于上面这三个场景，Node 比 Java 更擅长
    - 高并发应对之道
        - 什么是高并发？
            - 单位时间内，访问量特别大，就是高并发
        - 通用的高并发解决之道
            - 举个例子
            - 老王开了一个饭店
            - 1.雇了一个厨师 小A，客人源源不断，客人来了 小A 就去接待，选好菜了 小A 就去后厨做，做完后就交给客户享用。
                - 但是呢，总要有人排队等，因为他都是一个一个的做，所以客人有点不爽
            - 2.老王于是雇了3个厨师，现在共有 小A 小B 小C 三个厨师，客户排三条队，快了很多，这样问题就初步解决了
                - 然后呢，饭店名气越来越大，客人就更多了。这时候，老王就想再雇用多几个厨师，但是又一想，好像不太划算，因为每雇用一个厨师，